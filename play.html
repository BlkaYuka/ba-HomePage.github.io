<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Embedded Game | BA Festa Booth</title>
    <link rel="stylesheet" href="./styles.css" />
    <style>
      .iframe-wrap{position:relative;width:100%;padding-top:56.25%;border:1px solid rgba(255,255,255,.06);border-radius:.8rem;overflow:hidden;background:#071021}
      .iframe-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
      .warn{padding:1rem;border:1px solid rgba(255,255,255,.12);border-radius:.6rem;background:rgba(255,255,255,.04)}
    </style>
    <script>
      function getParam(name){
        const u = new URL(location.href);
        return u.searchParams.get(name);
      }
      function isSafeRelativePath(p){
        if(!p) return false;
        const s = p.trim();
        if(s.startsWith('http://')||s.startsWith('https://')||s.startsWith('//')) return false;
        // prevent breaking out via protocol-like or data URIs
        if(/^[a-zA-Z]+:/.test(s)) return false;
        // normalize .. attempts in a basic way for display; iframe still resolves relative to current origin
        return true;
      }
      document.addEventListener('DOMContentLoaded', () => {
        const src = getParam('src');
        const title = getParam('title') || 'Embedded Game';
        document.title = title + ' | BA Festa Booth';
        const titleEl = document.getElementById('title');
        titleEl.textContent = title;
        const frame = document.getElementById('game-frame');
        const warn = document.getElementById('warn');
        if(isSafeRelativePath(src)){
          frame.src = src;
        } else {
          warn.style.display = 'block';
          warn.innerText = '유효한 상대 경로(src)가 없습니다. 예: ?src=./games/mygame/index.html&title=My%20Game';
        }
      });
    </script>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="./games.html" class="brand">BA Games</a>
        <nav class="nav">
          <a href="./index.html#about">부스소개</a>
          <a href="./index.html#media">미디어</a>
          <a href="./index.html#info">이용안내</a>
        </nav>
      </div>
    </header>

    <main class="section">
      <div class="container">
        <h1 id="title" style="margin-top:0">Embedded Game</h1>
        <p id="warn" class="muted warn" style="display:none"></p>
        <div class="iframe-wrap">
          <iframe id="game-frame" title="Embedded Game" allowfullscreen></iframe>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <small>임베드 게임은 자체 입력/사운드 정책을 따릅니다.</small>
      </div>
    </footer>
  </body>
  </html>

